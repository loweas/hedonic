[
  {
    "objectID": "amenities.html",
    "href": "amenities.html",
    "title": "",
    "section": "",
    "text": "CodeShow All CodeHide All CodeView Source"
  },
  {
    "objectID": "amenities.html#r-libraries",
    "href": "amenities.html#r-libraries",
    "title": "Price of Paradise: How Natural Amenities Impact Housing Value in the Main Hawaiian Islands",
    "section": "",
    "text": "Code\nlibrary(sf)\n\n\nWarning: package 'sf' was built under R version 4.3.3\n\n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\n\nCode\nlibrary(terra)\n\n\nterra 1.7.55\n\n\nCode\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:terra':\n\n    intersect, union\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(ggplot2)\nlibrary(viridis) \n\n\nLoading required package: viridisLite\n\n\nCode\nlibrary(tidycensus)\nlibrary(readr)\nlibrary(DT)\nlibrary(tmap)\n\n\nBreaking News: tmap 3.x is retiring. Please test v4, e.g. with\nremotes::install_github('r-tmap/tmap')\n\n\nCode\nlibrary(tidyr)\n\n\n\nAttaching package: 'tidyr'\n\n\nThe following object is masked from 'package:terra':\n\n    extract"
  },
  {
    "objectID": "amenities.html#hawaii-demographics",
    "href": "amenities.html#hawaii-demographics",
    "title": "Price of Paradise: How Natural Amenities Impact Housing Value in the Main Hawaiian Islands",
    "section": "Hawaii Demographics",
    "text": "Hawaii Demographics\n\nTax Lots\nFirst the shape file of GIS Parcels for Hawaii. This is a parcel level tax record\n\n\nCode\nHI_2023_shapefile &lt;- read_sf(\"/Users/ashleylowe/CoreLogic_Hawaii/GIS_parcelmap/2023_shapefile/HI_2023_shapefile.shp\")\n\n\nggplot(HI_2023_shapefile) +\n  geom_sf() +\n  theme_minimal()\n\n\n\n\n\n\n\nProperties\nHere is a snippet of the observed properties transactions within this exercise.\n\n\nCode\nOT_Hawaii &lt;- read_csv(\"~/CoreLogic_Hawaii/data/intermediate/OT_Hawaii.csv\")\nOT_Hawaii=subset(OT_Hawaii, propertyindicatorcodestatic==10 | propertyindicatorcodestatic==11 | propertyindicatorcodestatic==21 | propertyindicatorcodestatic==22 | propertyindicatorcodestatic==24)\nobservations=OT_Hawaii$clip\n\nPB_Hawaii &lt;- read_csv(\n  \"~/CoreLogic_Hawaii/data/PB_Hawaii.csv\",\n  show_col_types = FALSE\n)\n\nPB_HawaiiInfo=PB_Hawaii[c(1,12,16:19,22:24,27,28,29:30,33:36,50,48,47,53,66,67,95:112,132:145,152,162,164,167)]\nPB_Hawaii=PB_Hawaii[PB_Hawaii$clip %in% observations, ]\nPB_HawaiiInfo=PB_HawaiiInfo[!is.na(PB_HawaiiInfo$parcellevellongitude),]\n\n\n\n\nCode\nPB_HawaiiInfo &lt;- st_as_sf(PB_HawaiiInfo, coords = c(\"parcellevellongitude\", \"parcellevellatitude\"), crs = 4326)\n\n\nggplot(PB_HawaiiInfo) +\n  geom_sf(size = 0.1, color = \"black\") +\n  theme_minimal()\n\n\n\n\n\n\n\nCensus Tract\nUsing TidyCensus track of 2023 ACS median income block we will match the property to the block group median income level of 2023.\n\n\nCode\n#census_api_key(\"9e0f7578cc78d6815b5b647e9c1fa813e0569840\")\nhawaii_blockgroups_income &lt;- get_acs( geography = \"block group\", variables = \"B19013_001\", state = \"HI\", year = 2023, geometry = TRUE)\n\n\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |===                                                                   |   5%\n  |                                                                            \n  |========                                                              |  12%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |==============                                                        |  21%\n  |                                                                            \n  |=================                                                     |  24%\n  |                                                                            \n  |=====================                                                 |  30%\n  |                                                                            \n  |=======================                                               |  32%\n  |                                                                            \n  |==========================                                            |  37%\n  |                                                                            \n  |==============================                                        |  43%\n  |                                                                            \n  |=================================                                     |  48%\n  |                                                                            \n  |===================================                                   |  50%\n  |                                                                            \n  |======================================                                |  54%\n  |                                                                            \n  |=========================================                             |  58%\n  |                                                                            \n  |==============================================                        |  66%\n  |                                                                            \n  |=================================================                     |  71%\n  |                                                                            \n  |=======================================================               |  79%\n  |                                                                            \n  |=============================================================         |  87%\n  |                                                                            \n  |================================================================      |  91%\n  |                                                                            \n  |======================================================================| 100%\n\n\nCode\nhawaii_blockgroups_income &lt;- hawaii_blockgroups_income %&gt;%\n  rename(median_income = estimate)\nhawaii_blockgroups_income_clean &lt;- hawaii_blockgroups_income %&gt;%\n  filter(st_geometry_type(geometry) %in% c(\"POLYGON\", \"MULTIPOLYGON\")) %&gt;%\n  st_make_valid()\n\n\n\n\nCode\nhawaii_blockgroups_income &lt;- st_transform(hawaii_blockgroups_income, 4326)\n\n\nhawaii_blockgroups_income &lt;- hawaii_blockgroups_income %&gt;%\n  separate(NAME, into = c(\"Block_Group\", \"Census_Tract\", \"County\", \"State\"),\n           sep = \"; \", remove = TRUE)\n\n# Drop empty geometries\nhawaii_blockgroups_income_clean &lt;- hawaii_blockgroups_income[!st_is_empty(hawaii_blockgroups_income), ]\n\n# Check row count\nnrow(hawaii_blockgroups_income_clean) \n\n\n[1] 1058\n\n\nCode\ntmap_mode(\"view\")\n\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(hawaii_blockgroups_income_clean) +\n    tm_polygons(\n        \"median_income\",\n        palette = \"magma\",\n        title = \"Median Income ($)\",\n        id = \"Census_Tract\",\n        popup.vars = c(\"Median Income\" = \"median_income\")\n    ) +\n    tm_basemap() +\n    tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\nMatch the income block to each property in the dataset\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo) == st_crs(hawaii_blockgroups_income)  \n\n\n[1] TRUE\n\n\nCode\n# If FALSE, transform one:\n#PB_HawaiiInfo &lt;- st_transform(PB_HawaiiInfo, st_crs(hawaii_blockgroups_income))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo, hawaii_blockgroups_income, join = st_within)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Price of Paradise: How Natural Amenities Impact Housing Value in the Main Hawaiian Islands",
    "section": "",
    "text": "This code will layout the spatial decisions made in the project looking at how natural amenities impact housing prices in Hawaii.\n\n\n\n\nCode\nlibrary(sf)\n\n\nWarning: package 'sf' was built under R version 4.3.3\n\n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\n\nCode\nlibrary(terra)\n\n\nterra 1.7.55\n\n\nCode\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:terra':\n\n    intersect, union\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(ggplot2)\nlibrary(viridis) \n\n\nLoading required package: viridisLite\n\n\nCode\nlibrary(tidycensus)\nlibrary(readr)\nlibrary(DT)\nlibrary(tmap)\n\n\nBreaking News: tmap 3.x is retiring. Please test v4, e.g. with\nremotes::install_github('r-tmap/tmap')\n\n\nCode\nlibrary(tidyr)\n\n\n\nAttaching package: 'tidyr'\n\n\nThe following object is masked from 'package:terra':\n\n    extract"
  },
  {
    "objectID": "index.html#r-libraries",
    "href": "index.html#r-libraries",
    "title": "Price of Paradise: How Natural Amenities Impact Housing Value in the Main Hawaiian Islands",
    "section": "",
    "text": "Code\nlibrary(sf)\n\n\nWarning: package 'sf' was built under R version 4.3.3\n\n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\n\nCode\nlibrary(terra)\n\n\nterra 1.7.55\n\n\nCode\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:terra':\n\n    intersect, union\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(ggplot2)\nlibrary(viridis) \n\n\nLoading required package: viridisLite\n\n\nCode\nlibrary(tidycensus)\nlibrary(readr)\nlibrary(DT)\nlibrary(tmap)\n\n\nBreaking News: tmap 3.x is retiring. Please test v4, e.g. with\nremotes::install_github('r-tmap/tmap')\n\n\nCode\nlibrary(tidyr)\n\n\n\nAttaching package: 'tidyr'\n\n\nThe following object is masked from 'package:terra':\n\n    extract"
  },
  {
    "objectID": "index.html#hawaii-demographics",
    "href": "index.html#hawaii-demographics",
    "title": "Price of Paradise: How Natural Amenities Impact Housing Value in the Main Hawaiian Islands",
    "section": "Hawaii Demographics",
    "text": "Hawaii Demographics\n\nTax Lots\nFirst the shape file of GIS Parcels for Hawaii. This is a parcel level tax record\n\n\nCode\nHI_2023_shapefile &lt;- read_sf(\"/Users/ashleylowe/CoreLogic_Hawaii/GIS_parcelmap/2023_shapefile/HI_2023_shapefile.shp\")\n\n\nggplot(HI_2023_shapefile) +\n  geom_sf() +\n  theme_minimal()\n\n\n\n\n\n\n\nProperties\nHere is a snippet of the observed properties transactions within this exercise.\n\n\nCode\nOT_Hawaii &lt;- read_csv(\"~/CoreLogic_Hawaii/data/intermediate/OT_Hawaii.csv\")\nOT_Hawaii=subset(OT_Hawaii, propertyindicatorcodestatic==10 | propertyindicatorcodestatic==11 | propertyindicatorcodestatic==21 | propertyindicatorcodestatic==22 | propertyindicatorcodestatic==24)\nobservations=OT_Hawaii$clip\n\nPB_Hawaii &lt;- read_csv(\n  \"~/CoreLogic_Hawaii/data/PB_Hawaii.csv\",\n  show_col_types = FALSE\n)\n\nPB_HawaiiInfo=PB_Hawaii[c(1,12,16:19,22:24,27,28,29:30,33:36,50,48,47,53,66,67,95:112,132:145,152,162,164,167)]\nPB_Hawaii=PB_Hawaii[PB_Hawaii$clip %in% observations, ]\nPB_HawaiiInfo=PB_HawaiiInfo[!is.na(PB_HawaiiInfo$parcellevellongitude),]\n\n\n\n\nCode\nPB_HawaiiInfo &lt;- st_as_sf(PB_HawaiiInfo, coords = c(\"parcellevellongitude\", \"parcellevellatitude\"), crs = 4326)\n\n\nggplot(PB_HawaiiInfo) +\n  geom_sf(size = 0.1, color = \"black\") +\n  theme_minimal()\n\n\n\n\n\n\n\nCensus Tract\nUsing TidyCensus track of 2023 ACS median income block we will match the property to the block group median income level of 2023.\n\n\nCode\n#census_api_key(\"9e0f7578cc78d6815b5b647e9c1fa813e0569840\")\nhawaii_blockgroups_income &lt;- get_acs( geography = \"block group\", variables = \"B19013_001\", state = \"HI\", year = 2023, geometry = TRUE)\n\n\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |=                                                                     |   2%\n  |                                                                            \n  |===                                                                   |   5%\n  |                                                                            \n  |====                                                                  |   6%\n  |                                                                            \n  |=======                                                               |  10%\n  |                                                                            \n  |========                                                              |  12%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |==========                                                            |  15%\n  |                                                                            \n  |===========                                                           |  16%\n  |                                                                            \n  |===============                                                       |  22%\n  |                                                                            \n  |==================                                                    |  26%\n  |                                                                            \n  |======================                                                |  31%\n  |                                                                            \n  |=======================                                               |  34%\n  |                                                                            \n  |===========================                                           |  39%\n  |                                                                            \n  |===============================                                       |  44%\n  |                                                                            \n  |=================================                                     |  47%\n  |                                                                            \n  |====================================                                  |  51%\n  |                                                                            \n  |=======================================                               |  55%\n  |                                                                            \n  |=============================================                         |  65%\n  |                                                                            \n  |===============================================                       |  67%\n  |                                                                            \n  |==================================================                    |  71%\n  |                                                                            \n  |=====================================================                 |  76%\n  |                                                                            \n  |=================================================================     |  92%\n  |                                                                            \n  |======================================================================| 100%\n\n\nCode\nhawaii_blockgroups_income &lt;- hawaii_blockgroups_income %&gt;%\n  rename(median_income = estimate)\nhawaii_blockgroups_income_clean &lt;- hawaii_blockgroups_income %&gt;%\n  filter(st_geometry_type(geometry) %in% c(\"POLYGON\", \"MULTIPOLYGON\")) %&gt;%\n  st_make_valid()\n\n\n\n\nCode\nhawaii_blockgroups_income &lt;- st_transform(hawaii_blockgroups_income, 4326)\n\n\nhawaii_blockgroups_income &lt;- hawaii_blockgroups_income %&gt;%\n  separate(NAME, into = c(\"Block_Group\", \"Census_Tract\", \"County\", \"State\"),\n           sep = \"; \", remove = TRUE)\n\n# Drop empty geometries\nhawaii_blockgroups_income_clean &lt;- hawaii_blockgroups_income[!st_is_empty(hawaii_blockgroups_income), ]\n\n# Check row count\nnrow(hawaii_blockgroups_income_clean) \n\n\n[1] 1058\n\n\nCode\ntmap_mode(\"view\")\n\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(hawaii_blockgroups_income_clean) +\n    tm_polygons(\n        \"median_income\",\n        palette = \"magma\",\n        title = \"Median Income ($)\",\n        id = \"Census_Tract\",\n        popup.vars = c(\"Median Income\" = \"median_income\")\n    ) +\n    tm_basemap() +\n    tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\nMatch the income block to each property in the dataset\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo) == st_crs(hawaii_blockgroups_income)  \n\n\n[1] TRUE\n\n\nCode\n# If FALSE, transform one:\n#PB_HawaiiInfo &lt;- st_transform(PB_HawaiiInfo, st_crs(hawaii_blockgroups_income))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo, hawaii_blockgroups_income, join = st_within)"
  },
  {
    "objectID": "risk.html",
    "href": "risk.html",
    "title": "",
    "section": "",
    "text": "CodeShow All CodeHide All CodeView Source"
  },
  {
    "objectID": "risk.html#risk",
    "href": "risk.html#risk",
    "title": "",
    "section": "Risk",
    "text": "Risk\n\nDisadvantage Communities\nEPA created a special layer in EJScreen titled “EPA IRA Disadvantaged.” This spatial layer flags census block groups as “disadvantaged” when they meet at least one of the following criteria\n\nEJScreen Supplemental Index (National): Block groups at or above the 90th percentile for any of the 13 supplemental indices compared to all U.S. block groups.\nEJScreen Supplemental Index (State): Block groups at or above the 90th percentile within their state for any of those indices.\nCEJST Designation: Block groups whose centroids fall in a census tract labeled “disadvantaged” by the Climate and Economic Justice Screening Tool (CEJST)\n\n\n\nCode\nEJ &lt;- read_sf(\"/Users/ashleylowe/Desktop/EJ/EPA_IRA_Disadvantage_Hawaii.shp\")\nEJ &lt;- st_transform(EJ, 4326)\nggplot(EJ) +\n  geom_sf(aes(fill = Disadvanta), color = \"lightgrey\", size = 0.1) +\n  scale_fill_manual(\n    values = c(\"Yes\" = \"firebrick\", \"No\" = \"lightblue\"),\n    name = \"Disadvantaged\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"right\",\n    legend.title = element_text(size = 12),\n    legend.text = element_text(size = 10)\n  )\n\n\n\n\n\nMatch the disadvantage communities to the properties in the dataset of each property.\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo) == st_crs(EJ)  \n# If FALSE, transform one:\n#PB_HawaiiInfo &lt;- st_transform(PB_HawaiiInfo, st_crs(EJ))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo, EJ, join = st_within)\n\n\n\n\nFire Risk\nFire risk maps are from the Hawaii GIS portal. Ratings of risk from wild-land fires for major populated areas on the Hawaiian Islands as of 2007\n\n\nCode\nfire &lt;- read_sf(\"/Users/ashleylowe/Trails/firerisk.shp/Fire_Risk_Areas.shp\")\n\nfire$risk_ratin[fire$risk_ratin %in% c(\"N/A\", \"\", \"NA\")] &lt;- NA\n\nfire$risk_ratin &lt;- factor(fire$risk_ratin, levels = c( \"High\", \"Medium\",\"Low\"), ordered = TRUE)\n\nfire &lt;- st_transform(fire, 4326)\n\ntmap_mode(\"view\")\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(fire) +\n  tm_polygons(\n    \"risk_ratin\",\n    palette = \"magma\",\n    title = \"Fire Risk\",\n    id = \"commu_name\",\n    popup.vars = c(\"Fire Risk\" = \"risk_ratin\")\n  ) +\n  tm_basemap() +\n  tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo_joined) == st_crs(fire)  \n# If FALSE, transform one:\n#PB_HawaiiInfo_joined &lt;- st_transform(PB_HawaiiInfo_joined, st_crs(fire))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo_joined, fire, join = st_within)\n\n\n\n\nSpecial Management Area\nIn Hawaiʻi, a Special Management Area (SMA) is a designated zone along the coastline or near sensitive areas where development is carefully regulated to protect environmental, cultural, and community resources.\n\nGoverned by Hawai’i Revised Statutes (HRS) Chapter 205A, Coastal Zone Management Act.\nEach county in Hawaiʻi has ordinances implementing SMA regulations (e.g., Maui County Code §19.510).\n\n\n\nCode\nSpecial_Management_Areas &lt;- read_sf(\"/Users/ashleylowe/CoreLogic_Hawaii/environmentalsets/Special_Management_Areas_(SMA)/Special_Management_Areas_(SMA).shp\")\n\nSpecial_Management_Areas=Special_Management_Areas[c(2)]\nSpecial_Management_Areas &lt;- st_transform(Special_Management_Areas, 4326)\n\nggplot(Special_Management_Areas) +\n  geom_sf() +\n  theme_minimal() +\n  labs(\n    title = \"Special Management Areas in Hawaii\",\n    subtitle = \"Protected coastal and sensitive zones\",\n    fill = \"smarea\"\n  ) +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\"),\n    plot.subtitle = element_text(size = 12)\n  )\n\n\n\n\n\nThis file matches the SMA propoerties that fall within each polygon\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo_joined) == st_crs(Special_Management_Areas)  \n# If FALSE, transform one:\n#PB_HawaiiInfo_joined &lt;- st_transform(PB_HawaiiInfo_joined, st_crs(Special_Management_Areas))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo_joined, Special_Management_Areas, join = st_within)"
  },
  {
    "objectID": "amenities.html#amenities",
    "href": "amenities.html#amenities",
    "title": "",
    "section": "Amenities",
    "text": "Amenities\n\nNature Reserves\nCentralized location of managed lands protecting natural and cultural resources of the Main Hawaiian Islands and Kure Atoll.\nWe will use this one to create a buffer and identify the properties that adjoin a reserve.\n\n\nCode\nreserves &lt;- read_sf(\"/Users/ashleylowe/Trails/Reserves/Reserves.shp\")\nreserves$managedby &lt;- gsub(\"[()]\", \"\", reserves$managedby)\n\ntmap_mode(\"view\")\n\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(reserves) +\n  tm_polygons(\n    \"managedby\",\n    palette = \"magma\",\n    id = \"name\",\n    popup.vars = c(\"Managed By\" = \"managedby\"),\n    legend.show = FALSE      # hides the legend\n  ) +\n  tm_basemap() +\n  tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\nTo adjoin we will focus on matching with buffer of the reserve location and use the tax plot match to adjoin to the property data. Add a buffer distance of 10 meters and then match with the Hawaii tmz file.\n\n\nCode\ncoastline &lt;- read_sf(\"/Users/ashleylowe/Hawaii - Recreation/Benefit Transfer/Oahu/coastline.shp\")\nHI_2023_shapefile &lt;- read_sf(\"/Users/ashleylowe/CoreLogic_Hawaii/GIS_parcelmap/2023_shapefile/HI_2023_shapefile.shp\")\n\nreserves &lt;- st_transform(reserves, 32605)\nreserves_buffered &lt;- st_buffer(reserves, dist = 10)\nreserves_buffered &lt;- st_transform(reserves_buffered, 4326)\nintersections &lt;- st_intersects(HI_2023_shapefile, reserves_buffered)\nHI_intersections &lt;- HI_2023_shapefile[lengths(intersections) &gt; 0, ]\n\n\n\nggplot() +\n    geom_sf(data = HI_intersections, fill = \"brown\", color = \"grey\") +\n    geom_sf(data = reserves_buffered, fill = \"forestgreen\", color = \"black\") +\n  geom_sf(data = coastline, color = \"black\") +\n    coord_sf(\n        xlim = c(-158.5, -157.5),  # longitudes\n        ylim = c(21, 21.9),        # latitudes in correct order\n        expand = FALSE\n    ) +\n    theme_minimal() +\n    labs(title = \"Buffered Reserves (Green) and Adjoining Properties (Brown)\")\n\n\n\n\n\nThe adjoining part will join shapefile to properties with Name of reserve, who manages it and the type of reserve it is.\n\n\nCode\n# Create a vector of indices for the first overlapping shp2 feature per shp1 row\nHI_2023_shapefile$reserve_names &lt;- sapply(intersections, function(idx) {\n  if (length(idx) == 0) {\n    return(NA_character_)\n  } else {\n    paste(reserves_buffered$name[idx], collapse = \", \")\n  }\n})\n\nHI_2023_shapefile$managedby &lt;- sapply(intersections, function(idx) {\n  if (length(idx) == 0) {\n    return(NA_character_)\n  } else {\n    paste(reserves_buffered$managedby[idx], collapse = \", \")\n  }\n})\n\nHI_2023_shapefile$type_defin &lt;- sapply(intersections, function(idx) {\n  if (length(idx) == 0) {\n    return(NA_character_)\n  } else {\n    paste(reserves_buffered$type_defin[idx], collapse = \", \")\n  }\n})"
  },
  {
    "objectID": "trails.html",
    "href": "trails.html",
    "title": "",
    "section": "",
    "text": "CodeShow All CodeHide All CodeView Source"
  },
  {
    "objectID": "trails.html#all-trails-in-alltrails",
    "href": "trails.html#all-trails-in-alltrails",
    "title": "",
    "section": "All trails in AllTrails",
    "text": "All trails in AllTrails\n\n\nCode\npoptrails=hawaii[c(4,5,7,8,9,10,11,12,34,35)]\npoptrails &lt;- st_as_sf(poptrails, coords = c(\"_geoloc.lng\", \"_geoloc.lat\"), crs = 4326)\ntmap_mode(\"view\")\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(poptrails) +\n    tm_dots(\n        col = \"popularity\",       # color based on popularity\n        palette = \"viridis\",\n        title = \"Popularity\",\n        size = 0.01,              # adjust point size\n        id = \"name\",              # hover info\n        popup.vars = c(\n            \"Popularity\" = \"popularity\"\n        )\n    ) +\n    tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\n\n\nCode\n# 1. find nearest feature index\nnearest_idx &lt;- st_nearest_feature(PB_HawaiiInfo, poptrails)\n\n# 2. get nearest trails (same row order as PB_HawaiiInfo)\nnearest_trails &lt;- poptrails[nearest_idx, ]\n\n# 3. calculate distance (element-wise)\nnearest_dist_m &lt;- st_distance(PB_HawaiiInfo, nearest_trails, by_element = TRUE)\n\n# 4. merge trail attributes + distance into PB_HawaiiInfo\nPB_HawaiiInfo &lt;- PB_HawaiiInfo %&gt;%\n  mutate(\n    nearest_trail_id    = nearest_idx,                         # row index in poptrails\n    nearest_trail_meters = as.numeric(nearest_dist_m)\n  ) %&gt;%\n  bind_cols(st_drop_geometry(nearest_trails))  # adds trail attributes"
  },
  {
    "objectID": "trails.html#th-trials",
    "href": "trails.html#th-trials",
    "title": "",
    "section": "90th Trials",
    "text": "90th Trials\nLooking at trails in the top 90th percentile ranked in Alltrails\n\n\nCode\npoptrails=hawaii[c(4,5,34,35,36)]\npoptrails=subset(poptrails, populartrail_9==1)\ncolnames(poptrails)[1]=\"name_90th\"\npoptrails &lt;- st_as_sf(poptrails, coords = c(\"_geoloc.lng\", \"_geoloc.lat\"), crs = 4326)\npoptrails &lt;- st_buffer(poptrails, dist = 30)\ntmap_mode(\"view\")\ntm_shape(poptrails) +\n    tm_dots(\n        col = \"popularity\",       # color based on popularity\n        palette = \"viridis\",\n        title = \"Popularity\",\n        size = 0.01,              # adjust point size\n        id = \"name_90th\",              # hover info\n        popup.vars = c(\n            \"Popularity\" = \"popularity\"\n        )\n    ) +\n    tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\n\n\nCode\npoptrails=poptrails[c(1,3,4)]\n\n\n# 1. find nearest feature index\nnearest_idx &lt;- st_nearest_feature(PB_HawaiiInfo, poptrails)\n\n# 2. get nearest trails (same row order as PB_HawaiiInfo)\nnearest_trails &lt;- poptrails[nearest_idx, ]\n\n# 3. calculate distance (element-wise)\nnearest_dist_m &lt;- st_distance(PB_HawaiiInfo, nearest_trails, by_element = TRUE)"
  },
  {
    "objectID": "trails.html#th-trials-1",
    "href": "trails.html#th-trials-1",
    "title": "",
    "section": "75th Trials",
    "text": "75th Trials\nLooking at trails in the top 75th percentile ranked in Alltrails\n\n\nCode\npoptrails=hawaii[c(4,5,34,35,37)]\npoptrails=subset(poptrails, populartrail_75==1)\ncolnames(poptrails)[1]=\"name_75th\"\npoptrails &lt;- st_as_sf(poptrails, coords = c(\"_geoloc.lng\", \"_geoloc.lat\"), crs = 4326)\n\n\n\n\nCode\npoptrails=poptrails[c(1,3,4)]\n\n# 1. find nearest feature index\nnearest_idx &lt;- st_nearest_feature(PB_HawaiiInfo, poptrails)\n\n# 2. get nearest trails (same row order as PB_HawaiiInfo)\nnearest_trails &lt;- poptrails[nearest_idx, ]\n\n# 3. calculate distance (element-wise)\nnearest_dist_m &lt;- st_distance(PB_HawaiiInfo, nearest_trails, by_element = TRUE)"
  },
  {
    "objectID": "beachs.html",
    "href": "beachs.html",
    "title": "",
    "section": "",
    "text": "CodeShow All CodeHide All CodeView Source"
  },
  {
    "objectID": "beachs.html#coral-reefs",
    "href": "beachs.html#coral-reefs",
    "title": "",
    "section": "Coral Reefs",
    "text": "Coral Reefs\nI am also interested in the coral reefs and if those are incorporated into housing prices. Using the [Asner et al](https://www.pnas.org/doi/10.1073/pnas.2017628117) Using the property file we isolate the potential coastal properties following\n\nSelecting the coastline shapefile\nCreate a buffer of 10meters for coastline\nSelect Hawaii properties intersecting the coastline\nBuffer properties 300 meters to grab the areas coral cover average.\n\nThe following file shows properties which returned a value using this method.\n\n\nCode\nasner &lt;- read_csv(\"/Users/ashleylowe/Hawaii - Recreation/Island_Condition/Coral/asner_coastline50meters.csv\")\n\nasner$costline_property=1\n\nasner=HI_2023_shapefile %&gt;%\n    semi_join(asner, by = \"objectid\") %&gt;%       # keep only matched rows\n    left_join(asner %&gt;% select(objectid, coral_asner), by = \"objectid\")  # bring in coral_cover\n# Transform to WGS84\nasner &lt;- st_transform(asner, 4326)\n\ntmap_mode(\"view\")\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(asner) +\n  tm_polygons(\n    \"coral_asner\",\n    palette = \"viridis\",\n    title = \"Coral Reef Cover\",\n    popup.vars = c(\"Coral Reef Cover\" = \"coral_asner\")\n  ) +\n  tm_basemap() +\n  tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\nMatching these to the housing locations across the islands\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo_joined) == st_crs(asner)  \n\n# If FALSE, transform one:\n#PB_HawaiiInfo_joined &lt;- st_transform(PB_HawaiiInfo_joined, st_crs(Special_Management_Areas))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo_joined, asner, join = st_within)"
  },
  {
    "objectID": "amenities.html#golf-courses",
    "href": "amenities.html#golf-courses",
    "title": "",
    "section": "Golf Courses",
    "text": "Golf Courses\n\n\nCode\nsource(\"_common.R\")\n\n\nWarning: package 'sf' was built under R version 4.3.3\n\n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\n\nterra 1.7.55\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:terra':\n\n    intersect, union\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nLoading required package: viridisLite\n\n\nBreaking News: tmap 3.x is retiring. Please test v4, e.g. with\nremotes::install_github('r-tmap/tmap')\n\n\n\nAttaching package: 'tidyr'\n\n\nThe following object is masked from 'package:terra':\n\n    extract\n\n\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat &lt;- vroom(...)\n  problems(dat)\n\n\nRows: 1751442 Columns: 104\n\n\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (66): compositepropertylinkagekey, originalapn, onlineformattedparcelid,...\ndbl (31): clip, fips, fipscode, apnparcelnumberunformatted, apnsequencenumbe...\nlgl  (7): previousclip, taxaccountnumber, mobilehomeindicator, effectiveyear...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat &lt;- vroom(...)\n  problems(dat)\n\n\nCode\ngolf=read_sf(\"/Users/ashleylowe/Trails/golf_courses.shp/golf_courses.shp\")\ngolf=st_transform(golf, 4326 )\ngolf=golf[c(1,7,8,12)]\n\n\ntmap_mode(\"view\")\n\n\ntmap mode set to interactive viewing\n\n\nCode\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(golf) +\n  tm_dots(\n    col = \"Name\",\n    palette = \"magma\",\n    size = 0.1,\n    id = \"Name\",\n    popup.vars = c(\"Name\" = \"Name\"),\n    legend.show = FALSE      # hides the legend\n  ) +\n  tm_basemap() +\n  tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\nWarning: Number of levels of the variable \"Name\" is 80, which is larger than\nmax.categories (which is 30), so levels are combined. Set\ntmap_options(max.categories = 80) in the layer function to show all levels.\n\n\n\n\n\n\n\nDistance to each Property calculation\n\n\nCode\n# 1. find nearest feature index\nnearest_idx &lt;- st_nearest_feature(PB_HawaiiInfo, golf)\n\n# 2. get nearest trails (same row order as PB_HawaiiInfo)\nnearest_trails &lt;- golf[nearest_idx, ]\n\n# 3. calculate distance (element-wise)\nnearest_dist_m &lt;- st_distance(PB_HawaiiInfo, nearest_trails, by_element = TRUE)\n\n# 4. merge trail attributes + distance into PB_HawaiiInfo\nPB_HawaiiInfo &lt;- PB_HawaiiInfo %&gt;%\n  mutate(\n    nearest_golf = as.numeric(nearest_dist_m)\n  ) %&gt;%\n  bind_cols(st_drop_geometry(nearest_trails))  # adds trail attributes"
  },
  {
    "objectID": "amenities.html#parks",
    "href": "amenities.html#parks",
    "title": "",
    "section": "Parks",
    "text": "Parks"
  },
  {
    "objectID": "amenities.html#nature-reserves",
    "href": "amenities.html#nature-reserves",
    "title": "",
    "section": "Nature Reserves",
    "text": "Nature Reserves\nCentralized location of managed lands protecting natural and cultural resources of the Main Hawaiian Islands and Kure Atoll.\nWe will use this one to create a buffer and identify the properties that adjoin a reserve.\n\n\nCode\nreserves &lt;- read_sf(\"/Users/ashleylowe/Trails/Reserves/Reserves.shp\")\nreserves$managedby &lt;- gsub(\"[()]\", \"\", reserves$managedby)\n\ntmap_mode(\"view\")\n\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(reserves) +\n  tm_polygons(\n    \"managedby\",\n    palette = \"magma\",\n    id = \"name\",\n    popup.vars = c(\"Managed By\" = \"managedby\"),\n    legend.show = FALSE      # hides the legend\n  ) +\n  tm_basemap() +\n  tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\nTo adjoin we will focus on matching with buffer of the reserve location and use the tax plot match to adjoin to the property data. Add a buffer distance of 10 meters and then match with the Hawaii tmz file.\n\n\nCode\nreserves &lt;- st_transform(reserves, 32605)\nreserves_buffered &lt;- st_buffer(reserves, dist = 10)\nreserves_buffered &lt;- st_transform(reserves_buffered, 4326)\nintersections &lt;- st_intersects(HI_2023_shapefile, reserves_buffered)\nHI_intersections &lt;- HI_2023_shapefile[lengths(intersections) &gt; 0, ]\n\n\n\nggplot() +\n    geom_sf(data = HI_intersections, fill = \"brown\", color = \"grey\") +\n    geom_sf(data = reserves_buffered, fill = \"forestgreen\", color = \"black\") +\n  geom_sf(data = coastline, color = \"black\") +\n    coord_sf(\n        xlim = c(-158.5, -157.5),  # longitudes\n        ylim = c(21, 21.9),        # latitudes in correct order\n        expand = FALSE\n    ) +\n    theme_minimal() +\n    labs(title = \"Buffered Reserves (Green) and Adjoining Properties (Brown)\")\n\n\n\n\n\nThe adjoining part will join shapefile to properties with Name of reserve, who manages it and the type of reserve it is.\n\n\nCode\n# Create a vector of indices for the first overlapping shp2 feature per shp1 row\nHI_2023_shapefile$reserve_names &lt;- sapply(intersections, function(idx) {\n  if (length(idx) == 0) {\n    return(NA_character_)\n  } else {\n    paste(reserves_buffered$name[idx], collapse = \", \")\n  }\n})\n\nHI_2023_shapefile$managedby &lt;- sapply(intersections, function(idx) {\n  if (length(idx) == 0) {\n    return(NA_character_)\n  } else {\n    paste(reserves_buffered$managedby[idx], collapse = \", \")\n  }\n})\n\nHI_2023_shapefile$type_defin &lt;- sapply(intersections, function(idx) {\n  if (length(idx) == 0) {\n    return(NA_character_)\n  } else {\n    paste(reserves_buffered$type_defin[idx], collapse = \", \")\n  }\n})"
  },
  {
    "objectID": "index.html#tax-lots",
    "href": "index.html#tax-lots",
    "title": "Price of Paradise: How Natural Amenities Impact Housing Value in the Main Hawaiian Islands",
    "section": "Tax Lots",
    "text": "Tax Lots\nFirst the shape file of GIS Parcels for Hawaii. This is a parcel level tax record\n\n\nCode\nsource(\"_common.R\")\n\nggplot(HI_2023_shapefile) +\n  geom_sf() +\n  theme_minimal()"
  },
  {
    "objectID": "index.html#properties",
    "href": "index.html#properties",
    "title": "Price of Paradise: How Natural Amenities Impact Housing Value in the Main Hawaiian Islands",
    "section": "Properties",
    "text": "Properties\nHere is a snippet of the observed properties transactions within this exercise.\n\n\nCode\nOT_Hawaii &lt;- read_csv(\"~/CoreLogic_Hawaii/data/intermediate/OT_Hawaii.csv\")\nOT_Hawaii=subset(OT_Hawaii, propertyindicatorcodestatic==10 | propertyindicatorcodestatic==11 | propertyindicatorcodestatic==21 | propertyindicatorcodestatic==22 | propertyindicatorcodestatic==24)\nobservations=OT_Hawaii$clip\n\nPB_Hawaii &lt;- read_csv(\n  \"~/CoreLogic_Hawaii/data/PB_Hawaii.csv\",\n  show_col_types = FALSE\n)\n\nPB_HawaiiInfo=PB_Hawaii[c(1,12,16:19,22:24,27,28,29:30,33:36,50,48,47,53,66,67,95:112,132:145,152,162,164,167)]\nPB_Hawaii=PB_Hawaii[PB_Hawaii$clip %in% observations, ]\nPB_HawaiiInfo=PB_HawaiiInfo[!is.na(PB_HawaiiInfo$parcellevellongitude),]\n\n\n\n\nCode\nPB_HawaiiInfo &lt;- st_as_sf(PB_HawaiiInfo, coords = c(\"parcellevellongitude\", \"parcellevellatitude\"), crs = 4326)\n\n\nggplot(PB_HawaiiInfo) +\n  geom_sf(size = 0.1, color = \"black\") +\n  theme_minimal()"
  },
  {
    "objectID": "index.html#census-tract",
    "href": "index.html#census-tract",
    "title": "Price of Paradise: How Natural Amenities Impact Housing Value in the Main Hawaiian Islands",
    "section": "Census Tract",
    "text": "Census Tract\nUsing TidyCensus track of 2023 ACS median income block we will match the property to the block group median income level of 2023.\n\n\nCode\n#census_api_key(\"9e0f7578cc78d6815b5b647e9c1fa813e0569840\")\nhawaii_blockgroups_income &lt;- get_acs( geography = \"block group\", variables = \"B19013_001\", state = \"HI\", year = 2023, geometry = TRUE)\n\n\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |=                                                                     |   2%\n  |                                                                            \n  |===                                                                   |   5%\n  |                                                                            \n  |====                                                                  |   6%\n  |                                                                            \n  |=======                                                               |  10%\n  |                                                                            \n  |========                                                              |  12%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |==========                                                            |  15%\n  |                                                                            \n  |===========                                                           |  16%\n  |                                                                            \n  |===============                                                       |  22%\n  |                                                                            \n  |==================                                                    |  26%\n  |                                                                            \n  |======================                                                |  31%\n  |                                                                            \n  |=======================                                               |  34%\n  |                                                                            \n  |===========================                                           |  39%\n  |                                                                            \n  |===============================                                       |  44%\n  |                                                                            \n  |=================================                                     |  47%\n  |                                                                            \n  |====================================                                  |  51%\n  |                                                                            \n  |=======================================                               |  55%\n  |                                                                            \n  |=============================================                         |  65%\n  |                                                                            \n  |===============================================                       |  67%\n  |                                                                            \n  |==================================================                    |  71%\n  |                                                                            \n  |=====================================================                 |  76%\n  |                                                                            \n  |=================================================================     |  92%\n  |                                                                            \n  |======================================================================| 100%\n\n\nCode\nhawaii_blockgroups_income &lt;- hawaii_blockgroups_income %&gt;%\n  rename(median_income = estimate)\nhawaii_blockgroups_income_clean &lt;- hawaii_blockgroups_income %&gt;%\n  filter(st_geometry_type(geometry) %in% c(\"POLYGON\", \"MULTIPOLYGON\")) %&gt;%\n  st_make_valid()\n\n\n\n\nCode\nhawaii_blockgroups_income &lt;- st_transform(hawaii_blockgroups_income, 4326)\n\n\nhawaii_blockgroups_income &lt;- hawaii_blockgroups_income %&gt;%\n  separate(NAME, into = c(\"Block_Group\", \"Census_Tract\", \"County\", \"State\"),\n           sep = \"; \", remove = TRUE)\n\n# Drop empty geometries\nhawaii_blockgroups_income_clean &lt;- hawaii_blockgroups_income[!st_is_empty(hawaii_blockgroups_income), ]\n\n# Check row count\nnrow(hawaii_blockgroups_income_clean) \n\n\n[1] 1058\n\n\nCode\ntmap_mode(\"view\")\n\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(hawaii_blockgroups_income_clean) +\n    tm_polygons(\n        \"median_income\",\n        palette = \"magma\",\n        title = \"Median Income ($)\",\n        id = \"Census_Tract\",\n        popup.vars = c(\"Median Income\" = \"median_income\")\n    ) +\n    tm_basemap() +\n    tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\nMatch the income block to each property in the dataset\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo) == st_crs(hawaii_blockgroups_income)  \n\n\n[1] TRUE\n\n\nCode\n# If FALSE, transform one:\n#PB_HawaiiInfo &lt;- st_transform(PB_HawaiiInfo, st_crs(hawaii_blockgroups_income))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo, hawaii_blockgroups_income, join = st_within)"
  },
  {
    "objectID": "risk.html#disadvantage-communities",
    "href": "risk.html#disadvantage-communities",
    "title": "",
    "section": "Disadvantage Communities",
    "text": "Disadvantage Communities\nEPA created a special layer in EJScreen titled “EPA IRA Disadvantaged.” This spatial layer flags census block groups as “disadvantaged” when they meet at least one of the following criteria\n\nEJScreen Supplemental Index (National): Block groups at or above the 90th percentile for any of the 13 supplemental indices compared to all U.S. block groups.\nEJScreen Supplemental Index (State): Block groups at or above the 90th percentile within their state for any of those indices.\nCEJST Designation: Block groups whose centroids fall in a census tract labeled “disadvantaged” by the Climate and Economic Justice Screening Tool (CEJST)\n\n\n\nCode\nsource(\"_common.R\")\nEJ &lt;- read_sf(\"/Users/ashleylowe/Desktop/EJ/EPA_IRA_Disadvantage_Hawaii.shp\")\nEJ &lt;- st_transform(EJ, 4326)\nggplot(EJ) +\n  geom_sf(aes(fill = Disadvanta), color = \"lightgrey\", size = 0.1) +\n  scale_fill_manual(\n    values = c(\"Yes\" = \"firebrick\", \"No\" = \"lightblue\"),\n    name = \"Disadvantaged\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"right\",\n    legend.title = element_text(size = 12),\n    legend.text = element_text(size = 10)\n  )\n\n\n\n\n\nMatch the disadvantage communities to the properties in the dataset of each property.\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo) == st_crs(EJ)  \n# If FALSE, transform one:\n#PB_HawaiiInfo &lt;- st_transform(PB_HawaiiInfo, st_crs(EJ))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo, EJ, join = st_within)"
  },
  {
    "objectID": "risk.html#fire-risk",
    "href": "risk.html#fire-risk",
    "title": "",
    "section": "Fire Risk",
    "text": "Fire Risk\nFire risk maps are from the Hawaii GIS portal. Ratings of risk from wild-land fires for major populated areas on the Hawaiian Islands as of 2007\n\n\nCode\nfire &lt;- read_sf(\"/Users/ashleylowe/Trails/firerisk.shp/Fire_Risk_Areas.shp\")\n\nfire$risk_ratin[fire$risk_ratin %in% c(\"N/A\", \"\", \"NA\")] &lt;- NA\n\nfire$risk_ratin &lt;- factor(fire$risk_ratin, levels = c( \"High\", \"Medium\",\"Low\"), ordered = TRUE)\n\nfire &lt;- st_transform(fire, 4326)\n\ntmap_mode(\"view\")\ncenter_lon &lt;- -157.45\ncenter_lat &lt;- 20.75\nzoom_level &lt;- 7\n\ntm_shape(fire) +\n  tm_polygons(\n    \"risk_ratin\",\n    palette = \"magma\",\n    title = \"Fire Risk\",\n    id = \"commu_name\",\n    popup.vars = c(\"Fire Risk\" = \"risk_ratin\")\n  ) +\n  tm_basemap() +\n  tm_view(set.view = c(center_lon, center_lat, zoom_level))\n\n\n\n\n\n\n\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo_joined) == st_crs(fire)  \n# If FALSE, transform one:\n#PB_HawaiiInfo_joined &lt;- st_transform(PB_HawaiiInfo_joined, st_crs(fire))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo_joined, fire, join = st_within)"
  },
  {
    "objectID": "risk.html#special-management-area",
    "href": "risk.html#special-management-area",
    "title": "",
    "section": "Special Management Area",
    "text": "Special Management Area\nIn Hawaiʻi, a Special Management Area (SMA) is a designated zone along the coastline or near sensitive areas where development is carefully regulated to protect environmental, cultural, and community resources.\n\nGoverned by Hawai’i Revised Statutes (HRS) Chapter 205A, Coastal Zone Management Act.\nEach county in Hawaiʻi has ordinances implementing SMA regulations (e.g., Maui County Code §19.510).\n\n\n\nCode\nSpecial_Management_Areas &lt;- read_sf(\"/Users/ashleylowe/CoreLogic_Hawaii/environmentalsets/Special_Management_Areas_(SMA)/Special_Management_Areas_(SMA).shp\")\n\nSpecial_Management_Areas=Special_Management_Areas[c(2)]\nSpecial_Management_Areas &lt;- st_transform(Special_Management_Areas, 4326)\n\nggplot(Special_Management_Areas) +\n  geom_sf() +\n  theme_minimal() +\n  labs(\n    title = \"Special Management Areas in Hawaii\",\n    subtitle = \"Protected coastal and sensitive zones\",\n    fill = \"smarea\"\n  ) +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\"),\n    plot.subtitle = element_text(size = 12)\n  )\n\n\n\n\n\nThis file matches the SMA propoerties that fall within each polygon\n\n\nCode\n# Make sure both have the same CRS\nst_crs(PB_HawaiiInfo_joined) == st_crs(Special_Management_Areas)  \n# If FALSE, transform one:\n#PB_HawaiiInfo_joined &lt;- st_transform(PB_HawaiiInfo_joined, st_crs(Special_Management_Areas))\n\n# Spatial join: attach polygon attributes to points\nPB_HawaiiInfo_joined&lt;- st_join(PB_HawaiiInfo_joined, Special_Management_Areas, join = st_within)"
  }
]